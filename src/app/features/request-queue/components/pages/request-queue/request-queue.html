<div class="flex h-full min-h-0 flex-col">
  <!-- Header -->
  <div class="flex items-center h-10 px-2">
    <h3 class="m-0 text-base font-medium">リクエスト</h3>
  </div>

  <!-- Row -->
  <div class="flex items-center gap-2 h-10 px-2">
    <div class="rounded-full bg-slate-100 text-slate-900 text-xs px-2 py-1">キュー</div>
    <div class="text-sm text-gray-500">{{ requestsList.length }} 件アクティブ</div>
  </div>

  <!-- Requests list -->
  <ul
    aria-label="リクエスト項目"
    class="bg-white flex flex-col flex-1 gap-2 overflow-auto mx-2 min-h-0"
  >
    @if (requestsList.length) {
      @for (r of requestsList; track r.request_id) {
        <li>
          <app-request
            [request]="r"
            [selectedRequestId]="selectedRequestId()"
            [isNew]="highlightedRequestId() === r.request_id"
            (selectRequest)="onSelectRequest($event)"
          ></app-request>
        </li>
      }
    </ul>

    <!-- Actions: fixed to bottom of the viewport -->
    <div class="h-14 px-2 gap-2 flex items-center flex-shrink-0 sticky bottom-0 bg-white">
      <app-primary-button
        label="新しいリクエスト"
        id="newRequest"
        (clicked)="handleNewRequestClick()"
      ></app-primary-button>
      <app-secondary-button
        label="更新"
        id="refreshBtn"
        (clicked)="refreshClick()"
      ></app-secondary-button>
    </div>
  </div>
</div>
