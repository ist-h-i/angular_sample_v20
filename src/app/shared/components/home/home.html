<div
  class="home grid auto-rows-fr gap-3 p-3 box-border items-stretch bg-transparent"
  role="application"
  aria-label="Sample App"
  [class.left-collapsed]="!requestPanelOpen()"
  [class.right-collapsed]="!annotationPanelOpen()"
  [style.height]="'calc(100vh - var(--topbar-height, 56px) - 2px)'"
>
  <!-- Left: Requests -->
  <aside
    class="home_panel side-panel flex flex-col min-h-0"
    [class.side-panel--collapsed]="!requestPanelOpen()"
    aria-label="request-queue"
  >
    <button
      type="button"
      class="side-toggle"
      (click)="toggleRequestPanel()"
      [attr.aria-expanded]="requestPanelOpen()"
      aria-controls="requestPanel"
    >
      <span class="side-toggle__icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 6.5h15M4.5 12h15M4.5 17.5h9" />
        </svg>
      </span>
      <span class="side-toggle__text">
        <span class="side-toggle__title">Requests</span>
        <span class="side-toggle__meta">{{ requestPanelOpen() ? 'Hide queue' : 'Open queue' }}</span>
      </span>
      <span
        class="side-toggle__chevron"
        aria-hidden="true"
        [style.transform]="requestPanelOpen() ? 'rotate(180deg)' : 'rotate(0deg)'"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5.25 16.5 12 9 18.75" />
        </svg>
      </span>
    </button>

    <div
      class="side-panel__body"
      id="requestPanel"
      [attr.aria-hidden]="!requestPanelOpen()"
    >
      <app-request-queue class="h-full min-h-0"></app-request-queue>
    </div>
  </aside>

  <!-- Center: Chat -->
  <main class="home_panel flex flex-col min-h-0 home_center" aria-label="chat-panel">
    <app-chat-panel class="h-full min-h-0"></app-chat-panel>
  </main>

  <!-- Right: Annotations -->
  <aside
    class="home_panel side-panel flex flex-col min-h-0"
    [class.side-panel--collapsed]="!annotationPanelOpen()"
    aria-label="annotation-list"
  >
    <button
      type="button"
      class="side-toggle"
      (click)="toggleAnnotationPanel()"
      [attr.aria-expanded]="annotationPanelOpen()"
      aria-controls="annotationPanel"
    >
      <span class="side-toggle__icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6.75 5.25h10.5A1.75 1.75 0 0 1 19 7v11l-4.5-2.5L10 18l-4.5-2.5V7A1.75 1.75 0 0 1 6.75 5.25Z"
          />
        </svg>
      </span>
      <span class="side-toggle__text">
        <span class="side-toggle__title">Annotations</span>
        <span class="side-toggle__meta">{{ annotationPanelOpen() ? 'Hide sources' : 'Open sources' }}</span>
      </span>
      <span
        class="side-toggle__chevron"
        aria-hidden="true"
        [style.transform]="annotationPanelOpen() ? 'rotate(0deg)' : 'rotate(180deg)'"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5.25 16.5 12 9 18.75" />
        </svg>
      </span>
    </button>

    <div
      class="side-panel__body"
      id="annotationPanel"
      [attr.aria-hidden]="!annotationPanelOpen()"
    >
      <app-annotation-list class="h-full min-h-0"></app-annotation-list>
    </div>
  </aside>
</div>
